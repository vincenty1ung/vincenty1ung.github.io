<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VINCENT CHYU - Developer Tools</title>
    <!-- og -->
    <meta property="og:title" content="VINCENT CHYU å¼€å‘è€…å·¥å…·" />
    <meta property="og:type" content="website" />
    <meta
      property="og:description"
      content="åœ¨çº¿å¼€å‘è€…å·¥å…·é›† - Base64ç¼–è§£ç ã€æ—¶é—´æˆ³è½¬æ¢ã€æ¯”ä¾‹è®¡ç®—ã€JSONæ ¼å¼åŒ–ã€YAMLè½¬æ¢ã€‚"
    />
    <meta
      property="og:url"
      content="https://blog-vincent.chyu.org/web/before/html/tools.html"
    />
    <meta property="og:locale" content="zh_CN" />
    <meta property="og:site_name" content="VINCENT CHYU Portfolio" />
    <meta
      property="og:image"
      content="https://cdn-photography-img-vincent.chyu.org/info/favicon.png"
    />
    <meta
      property="og:image:secure_url"
      content="https://cdn-photography-img-vincent.chyu.org/info/favicon.png"
    />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:alt" content="Vincent Chyu Icon" />

    <!-- twitteråˆ†äº«ä¼˜åŒ– -->
    <meta name="twitter:title" content="VINCENT CHYU å¼€å‘è€…å·¥å…·" />
    <meta
      name="twitter:description"
      content="åœ¨çº¿å¼€å‘è€…å·¥å…·é›† - Base64ç¼–è§£ç ã€æ—¶é—´æˆ³è½¬æ¢ã€æ¯”ä¾‹è®¡ç®—ã€JSONæ ¼å¼åŒ–ã€YAMLè½¬æ¢ã€‚"
    />
    <meta
      name="twitter:image"
      content="https://cdn-photography-img-vincent.chyu.org/info/favicon.png"
    />
    <meta name="twitter:card" content="summary" />

    <!-- å¾®ä¿¡ä¸“ç”¨æ ‡ç­¾ -->
    <meta itemprop="name" content="VINCENT CHYU å¼€å‘è€…å·¥å…·" />
    <meta
      itemprop="description"
      content="åœ¨çº¿å¼€å‘è€…å·¥å…·é›† - Base64ç¼–è§£ç ã€æ—¶é—´æˆ³è½¬æ¢ã€æ¯”ä¾‹è®¡ç®—ã€JSONæ ¼å¼åŒ–ã€YAMLè½¬æ¢ã€‚"
    />
    <meta
      itemprop="image"
      content="https://cdn-photography-img-vincent.chyu.org/info/favicon.png"
    />

    <!-- å¾®ä¿¡å°ç¨‹åº / å¾®ä¿¡æµè§ˆå™¨ -->
    <meta name="wechat:title" content="VINCENT CHYU å¼€å‘è€…å·¥å…·" />
    <meta
      name="wechat:description"
      content="åœ¨çº¿å¼€å‘è€…å·¥å…·é›† - Base64ç¼–è§£ç ã€æ—¶é—´æˆ³è½¬æ¢ã€æ¯”ä¾‹è®¡ç®—ã€JSONæ ¼å¼åŒ–ã€YAMLè½¬æ¢ã€‚"
    />
    <meta
      name="wechat:image"
      content="https://cdn-photography-img-vincent.chyu.org/info/favicon.png"
    />
    <!-- og -->
    <link rel="icon" href="https://cdn-photography-img-vincent.chyu.org/info/favicon.png" />
    <link rel="apple-touch-icon" href="https://cdn-photography-img-vincent.chyu.org/info/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="https://cdn-photography-img-vincent.chyu.org/info/favicon.png">
    
    <!-- js-yaml library for YAML conversion -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --dark-bg: #1a1a2e;
            --card-bg: #16213e;
            --input-bg: #0f1419;
            --text-primary: #eee;
            --text-secondary: #aaa;
            --border-color: #2a2a3e;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --glow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: var(--shadow);
        }

        header h1 {
            font-size: 2.5em;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        header p {
            color: var(--text-secondary);
            font-size: 1.1em;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .tab-button {
            padding: 12px 24px;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .tab-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            transition: left 0.3s ease;
            z-index: -1;
        }

        .tab-button:hover::before {
            left: 0;
        }

        .tab-button:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: var(--glow);
        }

        .tab-button.active {
            background: var(--primary-gradient);
            border-color: #667eea;
            box-shadow: var(--glow);
        }

        .tool-panel {
            display: none;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--shadow);
            animation: fadeIn 0.3s ease;
        }

        .tool-panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tool-title {
            font-size: 1.8em;
            margin-bottom: 20px;
            background: var(--secondary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tool-description {
            color: var(--text-secondary);
            margin-bottom: 25px;
            font-size: 0.95em;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        textarea, input[type="text"], input[type="number"], input[type="datetime-local"] {
            width: 100%;
            padding: 12px 16px;
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1em;
            font-family: 'Consolas', 'Monaco', monospace;
            transition: all 0.3s ease;
            resize: vertical;
        }

        textarea {
            min-height: 150px;
        }

        textarea:focus, input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .button-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        button {
            padding: 12px 28px;
            background: var(--primary-gradient);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: var(--success-gradient);
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }

        button.secondary:hover {
            box-shadow: 0 6px 20px rgba(79, 172, 254, 0.4);
        }

        .result-area {
            margin-top: 20px;
            padding: 16px;
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: 'Consolas', 'Monaco', monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
            min-height: 60px;
        }

        .error {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            border-color: #ff6b6b;
        }

        .success {
            color: #51cf66;
            background: rgba(81, 207, 102, 0.1);
            border-color: #51cf66;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        /* Ratio Calculator Styles */
        .ratio-input-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .ratio-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ratio-input-group input[type="number"] {
            width: 120px;
            text-align: center;
            font-size: 1.2em;
        }

        .ratio-separator {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--text-primary);
        }

        .ratio-equals {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--text-secondary);
        }

        .ratio-single-input {
            flex: 1;
            min-width: 200px;
        }

        .ratio-single-input input {
            width: 100%;
        }

        .ratio-result {
            margin-top: 15px;
            padding: 20px;
            background: var(--input-bg);
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .ratio-result h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .ratio-result .value {
            font-size: 2em;
            font-weight: bold;
            color: var(--text-primary);
        }

        .common-ratios {
            margin-top: 30px;
            padding: 20px;
            background: var(--input-bg);
            border-radius: 10px;
        }

        .common-ratios h4 {
            color: var(--text-secondary);
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .ratio-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .ratio-chip {
            padding: 8px 16px;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: #667eea;
            font-size: 0.95em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .ratio-chip:hover {
            background: rgba(102, 126, 234, 0.2);
            border-color: #667eea;
            transform: translateY(-2px);
        }


        /* Copy Button Styles */
        .copy-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .copy-btn:hover {
            background: rgba(102, 126, 234, 0.2);
            border-color: #667eea;
            transform: translateY(-50%) scale(1.1);
        }

        .copy-btn:active {
            transform: translateY(-50%) scale(0.95);
        }


        /* Color Converter Styles */
        .color-converter-container {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 30px;
            align-items: start;
            margin-bottom: 25px;
        }

        .color-input-section {
            background: var(--input-bg);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid var(--border-color);
        }

        .color-section-title {
            color: var(--text-primary);
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .rgb-inputs {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
        }

        .rgb-input-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .rgb-input-group label {
            color: var(--text-secondary);
            font-size: 0.9em;
            font-weight: 600;
        }

        .rgb-input-group input {
            width: 100%;
            padding: 10px;
            text-align: center;
            font-size: 1.1em;
            font-weight: 600;
        }

        .hex-input-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
        }

        .hex-input-group label {
            color: var(--text-secondary);
            font-size: 1.5em;
            font-weight: 600;
        }

        .hex-input-group input {
            flex: 1;
            padding: 12px;
            font-size: 1.2em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .color-text-output {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .color-text-output label {
            color: var(--text-secondary);
            font-size: 0.85em;
        }

        .color-text-output input {
            padding: 10px;
            font-family: 'Consolas', 'Monaco', monospace;
            background: var(--card-bg);
            cursor: text;
        }

        .color-preview-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .color-preview {
            width: 150px;
            height: 150px;
            border-radius: 12px;
            border: 3px solid var(--border-color);
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }

        .color-preview:hover {
            transform: scale(1.05);
        }

        .color-preview-label {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .common-colors {
            margin-top: 30px;
            padding: 20px;
            background: var(--input-bg);
            border-radius: 10px;
        }

        .common-colors h4 {
            color: var(--text-secondary);
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .color-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .color-chip-item {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .color-chip-item:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border-color: var(--text-primary);
        }

        .color-chip-item:active {
            transform: translateY(0) scale(1);
        }

        @media (max-width: 1024px) {
            .color-converter-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .color-preview {
                width: 120px;
                height: 120px;
            }
        }


        .timestamp-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .timestamp-card {
            padding: 15px;
            background: var(--input-bg);
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .timestamp-card h4 {
            color: var(--text-secondary);
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .timestamp-card .value {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--text-primary);
            word-break: break-all;
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        footer a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: #764ba2;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .tool-title {
                font-size: 1.4em;
            }

            .two-column {
                grid-template-columns: 1fr;
            }

            .tabs {
                gap: 8px;
            }

            .tab-button {
                padding: 10px 16px;
                font-size: 0.9em;
            }

            .tool-panel {
                padding: 20px;
            }

            button {
                width: 100%;
            }
        }


        /* Toast Notification Styles */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 24px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            font-size: 1em;
            font-weight: 500;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast.success {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .toast.error {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }


        /* JSON Tree View Styles */
        .json-container {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 20px;
            margin-top: 20px;
        }

        .json-tree-panel {
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 600px;
        }

        .json-tree-header {
            padding: 12px 16px;
            background: var(--card-bg);
            border-bottom: 2px solid var(--border-color);
        }

        .json-tree-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .json-tree {
            padding: 12px;
            overflow-y: auto;
            flex: 1;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.95em;
        }

        .json-placeholder {
            color: var(--text-secondary);
            font-style: italic;
            padding: 20px;
            text-align: center;
        }

        .json-node {
            margin-left: 20px;
            user-select: none;
        }

        .json-node-root {
            margin-left: 0;
        }

        .json-node-line {
            display: flex;
            align-items: center;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .json-node-line:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .json-node-line.selected {
            background: rgba(102, 126, 234, 0.2);
            border-left: 3px solid #667eea;
        }

        .json-toggle {
            width: 16px;
            height: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 6px;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 12px;
        }

        .json-toggle.collapsed::before {
            content: 'â–¶';
        }

        .json-toggle.expanded::before {
            content: 'â–¼';
        }

        .json-toggle.leaf {
            visibility: hidden;
        }

        .json-node-key {
            color: #9cdcfe;
            font-weight: 500;
            margin-right: 6px;
        }

        .json-node-type {
            color: var(--text-secondary);
            font-size: 0.85em;
            margin-left: 6px;
        }

        .json-node-value {
            margin-left: 6px;
        }

        .json-node-value.string {
            color: #ce9178;
        }

        .json-node-value.number {
            color: #b5cea8;
        }

        .json-node-value.boolean {
            color: #569cd6;
        }

        .json-node-value.null {
            color: #569cd6;
        }

        .json-node-children {
            display: none;
        }

        .json-node-children.expanded {
            display: block;
        }

        .json-editor-panel {
            display: flex;
            flex-direction: column;
        }

        .json-path-bar {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            padding: 12px;
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            border-radius: 10px;
        }

        .json-path-bar label {
            color: var(--text-secondary);
            font-size: 0.9em;
            font-weight: 500;
        }

        .json-path-bar input {
            flex: 1;
            padding: 6px 10px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 0.9em;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .small-btn {
            padding: 6px 16px !important;
            font-size: 0.85em !important;
            min-width: auto !important;
        }

        @media (max-width: 1024px) {
            .json-container {
                grid-template-columns: 1fr;
            }

            .json-tree-panel {
                max-height: 400px;
            }
        }

        /* JSON Syntax Highlighting */
        .json-key { color: #9cdcfe; }
        .json-string { color: #ce9178; }
        .json-number { color: #b5cea8; }
        .json-boolean { color: #569cd6; }
        .json-null { color: #569cd6; }

    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ› ï¸ Developer Tools</h1>
            <p>å®ç”¨çš„åœ¨çº¿å¼€å‘è€…å·¥å…·é›†åˆ</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('base64')">Base64 ç¼–è§£ç </button>
            <button class="tab-button" onclick="switchTab('timestamp')">æ—¶é—´æˆ³è½¬æ¢</button>
            <button class="tab-button" onclick="switchTab('ratio')">æ¯”ä¾‹è®¡ç®—</button>
            <button class="tab-button" onclick="switchTab('color')">é¢œè‰²è½¬æ¢</button>
            <button class="tab-button" onclick="switchTab('md5')">MD5 å“ˆå¸Œ</button>
            <button class="tab-button" onclick="switchTab('json')">JSON æ ¼å¼åŒ–</button>
            <button class="tab-button" onclick="switchTab('yaml')">YAML è½¬æ¢</button>
        </div>

        <!-- Base64 Tool -->
        <div id="base64" class="tool-panel active">
            <h2 class="tool-title">Base64 ç¼–è§£ç </h2>
            <p class="tool-description">å°†æ–‡æœ¬ç¼–ç ä¸º Base64 æ ¼å¼,æˆ–å°† Base64 è§£ç ä¸ºåŸå§‹æ–‡æœ¬</p>
            
            <div class="input-group">
                <label for="base64Input">è¾“å…¥æ–‡æœ¬</label>
                <textarea id="base64Input" placeholder="åœ¨æ­¤è¾“å…¥è¦ç¼–ç æˆ–è§£ç çš„æ–‡æœ¬..."></textarea>
            </div>

            <div class="button-group">
                <button onclick="encodeBase64()">ğŸ”’ ç¼–ç ä¸º Base64</button>
                <button onclick="decodeBase64()" class="secondary">ğŸ”“ è§£ç  Base64</button>
                <button onclick="copyResult('base64Result')" class="secondary">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
            </div>

            <div class="input-group">
                <label>ç»“æœ</label>
                <div id="base64Result" class="result-area">ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</div>
            </div>
        </div>

        <!-- Timestamp Tool -->
        <div id="timestamp" class="tool-panel">
            <h2 class="tool-title">æ—¶é—´æˆ³è½¬æ¢</h2>
            <p class="tool-description">æ—¶é—´æˆ³ä¸æ—¥æœŸæ—¶é—´ä¹‹é—´çš„ç›¸äº’è½¬æ¢</p>

            <div class="timestamp-display">
                <div class="timestamp-card">
                    <h4>å½“å‰æ—¶é—´æˆ³(ç§’)</h4>
                    <div class="value" id="currentTimestampSec">-</div>
                </div>
                <div class="timestamp-card">
                    <h4>å½“å‰æ—¶é—´æˆ³(æ¯«ç§’)</h4>
                    <div class="value" id="currentTimestampMs">-</div>
                </div>
                <div class="timestamp-card">
                    <h4>å½“å‰æ—¶é—´</h4>
                    <div class="value" id="currentDateTime">-</div>
                </div>
            </div>

            <div class="two-column" style="margin-top: 30px;">
                <div>
                    <div class="input-group">
                        <label for="timestampInput">æ—¶é—´æˆ³(ç§’æˆ–æ¯«ç§’)</label>
                        <input type="text" id="timestampInput" placeholder="ä¾‹å¦‚: 1701763200">
                    </div>
                    <button onclick="timestampToDate()" style="width: 100%;">â±ï¸ è½¬æ¢ä¸ºæ—¥æœŸ</button>
                    <div class="input-group" style="margin-top: 15px;">
                        <label>è½¬æ¢ç»“æœ</label>
                        <div id="timestampResult" class="result-area">-</div>
                    </div>
                </div>

                <div>
                    <div class="input-group">
                        <label for="dateInput">æ—¥æœŸæ—¶é—´</label>
                        <input type="datetime-local" id="dateInput">
                    </div>
                    <button onclick="dateToTimestamp()" style="width: 100%;">ğŸ“… è½¬æ¢ä¸ºæ—¶é—´æˆ³</button>
                    <div class="input-group" style="margin-top: 15px;">
                        <label>è½¬æ¢ç»“æœ</label>
                        <div id="dateResult" class="result-area">-</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ratio Calculator -->
        <div id="ratio" class="tool-panel">
            <h2 class="tool-title">æ¯”ä¾‹è®¡ç®—å™¨</h2>
            <p class="tool-description">è‡ªåŠ¨åŒ–ç®€æ¯”ä¾‹,æ”¯æŒå¤šç§åˆ†éš”ç¬¦ (: / - * x) æˆ–åˆ†å¼€è¾“å…¥</p>

            <!-- ç¬¬ä¸€è¾“å…¥ç»„: è¾“å…¥åŸå§‹æ¯”ä¾‹ -->
            <div class="input-group">
                <label for="ratioOriginalInput">ç¬¬ä¸€è¾“å…¥ - è¾“å…¥åŸå§‹æ¯”ä¾‹</label>
                <input type="text" id="ratioOriginalInput" placeholder="è¾“å…¥: 6048Ã—4032 æˆ– 6048/4032 æˆ–å•ç‹¬è¾“å…¥ 6048" style="width: 100%;">
            </div>

            <!-- ç¬¬äºŒè¾“å…¥ç»„: æ˜¾ç¤º/é€‰æ‹©æœ€ç®€æ¯”ä¾‹ -->
            <div class="input-group">
                <label>ç¬¬äºŒè¾“å…¥ - æœ€ç®€æ¯”ä¾‹</label>
                <div class="ratio-input-group" style="justify-content: flex-start;">
                    <input type="number" id="ratioSimple1" placeholder="3" min="0" step="any" style="width: 100px;">
                    <span class="ratio-separator">:</span>
                    <input type="number" id="ratioSimple2" placeholder="2" min="0" step="any" style="width: 100px;">
                </div>
            </div>

            <!-- ç¬¬ä¸‰è¾“å…¥ç»„: æ˜¾ç¤ºè®¡ç®—ç»“æœ -->
            <div class="input-group">
                <label>ç¬¬ä¸‰è¾“å…¥ - è®¡ç®—ç»“æœ</label>
                <div style="display: flex; align-items: center; gap: 15px;">
                    <span class="ratio-equals" style="font-size: 1.5em;">=</span>
                    <input type="text" id="ratioResultInput" readonly placeholder="ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..." style="flex: 1;">
                </div>
            </div>

            <div class="button-group">
                <button onclick="calculateRatio()">ğŸ”¢ è®¡ç®—æœ€ç®€æ¯”ä¾‹</button>
                <button onclick="copyOriginalRatio()" class="secondary">ğŸ“‹ å¤åˆ¶åŸå§‹æ¯”ä¾‹</button>
                <button onclick="copySimpleRatio()" class="secondary">ğŸ“‹ å¤åˆ¶æœ€ç®€æ¯”ä¾‹</button>
                <button onclick="copyRatioResult()" class="secondary">ğŸ“‹ å¤åˆ¶è®¡ç®—ç»“æœ</button>
                <button onclick="clearRatio()" class="secondary">ğŸ—‘ï¸ æ¸…ç©º</button>
            </div>

            <div class="common-ratios">
                <h4>å¸¸ç”¨æ¯”ä¾‹å€¼:</h4>
                <div class="ratio-chips">
                    <span class="ratio-chip" onclick="setRatio('3:2')">3:2</span>
                    <span class="ratio-chip" onclick="setRatio('4:3')">4:3</span>
                    <span class="ratio-chip" onclick="setRatio('16:9')">16:9</span>
                    <span class="ratio-chip" onclick="setRatio('2:1')">2:1</span>
                    <span class="ratio-chip" onclick="setRatio('1.618:1')">1.618:1</span>
                    <span class="ratio-chip" onclick="setRatio('2.35:1')">2.35:1</span>
                    <span class="ratio-chip" onclick="setRatio('3:4')">3:4</span>
                    <span class="ratio-chip" onclick="setRatio('4:5')">4:5</span>
                    <span class="ratio-chip" onclick="setRatio('9:16')">9:16</span>
                    <span class="ratio-chip" onclick="setRatio('1:2')">1:2</span>
                    <span class="ratio-chip" onclick="setRatio('5:3')">5:3</span>
                </div>
            </div>
        </div>

        <!-- Color Converter -->
        <div id="color" class="tool-panel">
            <h2 class="tool-title">é¢œè‰²è½¬æ¢å™¨</h2>
            <p class="tool-description">RGB ä¸ HEX 16è¿›åˆ¶é¢œè‰²æ ¼å¼ä¹‹é—´çš„ç›¸äº’è½¬æ¢</p>

            <div class="color-converter-container">
                <!-- RGB Input Section -->
                <div class="color-input-section">
                    <h3 class="color-section-title">RGB é¢œè‰²</h3>
                    <div class="rgb-inputs">
                        <div class="rgb-input-group">
                            <label>R</label>
                            <input type="number" id="colorR" min="0" max="255" value="102" placeholder="0-255">
                        </div>
                        <div class="rgb-input-group">
                            <label>G</label>
                            <input type="number" id="colorG" min="0" max="255" value="126" placeholder="0-255">
                        </div>
                        <div class="rgb-input-group">
                            <label>B</label>
                            <input type="number" id="colorB" min="0" max="255" value="234" placeholder="0-255">
                        </div>
                    </div>
                    <div class="color-text-output">
                        <label>RGB æ ¼å¼:</label>
                        <input type="text" id="rgbOutput" readonly value="rgb(102, 126, 234)">
                    </div>
                </div>

                <!-- Color Preview -->
                <div class="color-preview-section">
                    <div class="color-preview" id="colorPreview" style="background-color: rgb(102, 126, 234); cursor: pointer;" onclick="document.getElementById('colorPicker').click();" title="ç‚¹å‡»é€‰æ‹©é¢œè‰²"></div>
                    <input type="color" id="colorPicker" value="#667eea" style="display: none;" onchange="onColorPickerChange()">
                    <p class="color-preview-label">é¢œè‰²é¢„è§ˆ (ç‚¹å‡»é€‰æ‹©)</p>
                </div>

                <!-- HEX Input Section -->
                <div class="color-input-section">
                    <h3 class="color-section-title">HEX 16è¿›åˆ¶</h3>
                    <div class="hex-input-group">
                        <label>#</label>
                        <input type="text" id="hexInput" maxlength="6" value="667eea" placeholder="667eea">
                    </div>
                    <div class="color-text-output">
                        <label>HEX æ ¼å¼:</label>
                        <input type="text" id="hexOutput" readonly value="#667eea">
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button onclick="rgbToHex()">â¡ï¸ RGB è½¬ HEX</button>
                <button onclick="hexToRgb()" class="secondary">â¬…ï¸ HEX è½¬ RGB</button>
                <button onclick="copyColorValue()" class="secondary">ğŸ“‹ å¤åˆ¶é¢œè‰²å€¼</button>
            </div>

            <div class="common-colors">
                <h4>å¸¸ç”¨é¢œè‰²:</h4>
                <div class="color-chips">
                    <span class="color-chip-item" style="background: #667eea;" onclick="setColor('#667eea')" title="#667eea"></span>
                    <span class="color-chip-item" style="background: #764ba2;" onclick="setColor('#764ba2')" title="#764ba2"></span>
                    <span class="color-chip-item" style="background: #f093fb;" onclick="setColor('#f093fb')" title="#f093fb"></span>
                    <span class="color-chip-item" style="background: #4facfe;" onclick="setColor('#4facfe')" title="#4facfe"></span>
                    <span class="color-chip-item" style="background: #43e97b;" onclick="setColor('#43e97b')" title="#43e97b"></span>
                    <span class="color-chip-item" style="background: #fa709a;" onclick="setColor('#fa709a')" title="#fa709a"></span>
                    <span class="color-chip-item" style="background: #fee140;" onclick="setColor('#fee140')" title="#fee140"></span>
                    <span class="color-chip-item" style="background: #30cfd0;" onclick="setColor('#30cfd0')" title="#30cfd0"></span>
                    <span class="color-chip-item" style="background: #ff6b6b;" onclick="setColor('#ff6b6b')" title="#ff6b6b"></span>
                    <span class="color-chip-item" style="background: #51cf66;" onclick="setColor('#51cf66')" title="#51cf66"></span>
                    <span class="color-chip-item" style="background: #339af0;" onclick="setColor('#339af0')" title="#339af0"></span>
                    <span class="color-chip-item" style="background: #f59f00;" onclick="setColor('#f59f00')" title="#f59f00"></span>
                </div>
            </div>
        </div>

        <!-- MD5 Hash Tool -->
        <div id="md5" class="tool-panel">
            <h2 class="tool-title">MD5 / SHA å“ˆå¸Œè®¡ç®—</h2>
            <p class="tool-description">è®¡ç®—æ–‡æœ¬æˆ–æ–‡ä»¶çš„ MD5ã€SHA-1ã€SHA-256 å“ˆå¸Œå€¼</p>

            <div class="input-group">
                <label for="md5Input">è¾“å…¥æ–‡æœ¬</label>
                <textarea id="md5Input" placeholder="åœ¨æ­¤è¾“å…¥è¦è®¡ç®—å“ˆå¸Œå€¼çš„æ–‡æœ¬..."></textarea>
            </div>

            <div class="input-group">
                <label for="md5FileInput">æˆ–é€‰æ‹©æ–‡ä»¶</label>
                <input type="file" id="md5FileInput" onchange="handleFileSelect(event)">
            </div>

            <div class="button-group">
                <button onclick="calculateHashes()">ğŸ”’ è®¡ç®—å“ˆå¸Œå€¼</button>
                <button onclick="clearMD5()" class="secondary">ğŸ—‘ï¸ æ¸…ç©º</button>
            </div>

            <div id="hashResults" style="display: none; margin-top: 25px;">
                <div class="input-group">
                    <label>MD5</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="md5Result" readonly style="flex: 1; font-family: 'Consolas', monospace;">
                        <button onclick="copyHash('md5Result')" class="secondary">ğŸ“‹ å¤åˆ¶</button>
                    </div>
                </div>

                <div class="input-group">
                    <label>SHA-1</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="sha1Result" readonly style="flex: 1; font-family: 'Consolas', monospace;">
                        <button onclick="copyHash('sha1Result')" class="secondary">ğŸ“‹ å¤åˆ¶</button>
                    </div>
                </div>

                <div class="input-group">
                    <label>SHA-256</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="sha256Result" readonly style="flex: 1; font-family: 'Consolas', monospace;">
                        <button onclick="copyHash('sha256Result')" class="secondary">ğŸ“‹ å¤åˆ¶</button>
                    </div>
                </div>
            </div>
        </div>

            </div>
        </div>

        <!-- JSON Formatter -->
        <div id="json" class="tool-panel">
            <h2 class="tool-title">JSON ç¼–è¾‘å™¨</h2>
            <p class="tool-description">é«˜çº§ JSON ç¼–è¾‘å™¨ - æ ‘å½¢è§†å›¾ã€è·¯å¾„å¯¼èˆªã€å±•å¼€/æŠ˜å </p>

            <div class="json-container">
                <!-- Left Panel: Tree View -->
                <div class="json-tree-panel">
                    <div class="json-tree-header">
                        <span class="json-tree-title">JSON ç»“æ„</span>
                    </div>
                    <div id="jsonTree" class="json-tree">
                        <div class="json-placeholder">åœ¨å³ä¾§è¾“å…¥ JSON æ•°æ®...</div>
                    </div>
                </div>

                <!-- Right Panel: Editor -->
                <div class="json-editor-panel">
                    <div class="json-path-bar">
                        <label>Path:</label>
                        <input type="text" id="jsonPath" readonly placeholder="JSON.root">
                        <label style="margin-left: 15px;">Key:</label>
                        <input type="text" id="jsonKey" readonly placeholder="key">
                        <button onclick="copyJsonPath()" class="small-btn">Copy</button>
                    </div>
                    
                    <div class="input-group">
                        <textarea id="jsonInput" placeholder='{"name":"Vincent","tools":["Base64","JSON","YAML"]}'></textarea>
                    </div>

                    <div class="button-group">
                        <button onclick="parseJSON()">ğŸ” è§£æ JSON</button>
                        <button onclick="expandAll()" class="secondary">+ Expand all</button>
                        <button onclick="collapseAll()" class="secondary">- Collapse all</button>
                        <button onclick="formatJSONText()" class="secondary">âœ¨ æ ¼å¼åŒ–</button>
                        <button onclick="compressJSON()" class="secondary">ğŸ“¦ å‹ç¼©</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- YAML Converter -->
        <div id="yaml" class="tool-panel">
            <h2 class="tool-title">YAML â‡„ Properties è½¬æ¢</h2>
            <p class="tool-description">YAML ä¸ Properties æ ¼å¼ä¹‹é—´çš„åŒå‘è½¬æ¢</p>

            <div class="two-column">
                <div>
                    <div class="input-group">
                        <label for="yamlInput">YAML / Properties è¾“å…¥</label>
                        <textarea id="yamlInput" placeholder="server:&#10;  port: 8080&#10;  host: localhost"></textarea>
                    </div>
                </div>

                <div>
                    <div class="input-group">
                        <label for="yamlOutput">è½¬æ¢ç»“æœ</label>
                        <textarea id="yamlOutput" placeholder="è½¬æ¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..." readonly></textarea>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button onclick="yamlToProperties()">â¡ï¸ YAML è½¬ Properties</button>
                <button onclick="propertiesToYaml()" class="secondary">â¬…ï¸ Properties è½¬ YAML</button>
                <button onclick="copyResult('yamlOutput')" class="secondary">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
            </div>
        </div>

        <footer>
            <p>Made with â¤ï¸ by Vincent | <a href="../../../index.html">è¿”å›ä¸»é¡µ</a></p>
        </footer>
    </div>

    <script>
        // Toast Notification Function
        function showToast(message, type = 'success') {
            // Remove existing toast if any
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }

            // Create toast element
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            // Add icon based on type
            const icon = type === 'success' ? 'âœ“' : type === 'error' ? 'âœ•' : 'â„¹';
            toast.innerHTML = `<span style="font-size: 1.5em;">${icon}</span><span>${message}</span>`;
            
            document.body.appendChild(toast);
            
            // Trigger animation
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            // Remove after 2.5 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    toast.remove();
                }, 300);
            }, 2500);
        }

        // Tab Switching
        function switchTab(tabName) {
            // Hide all panels
            document.querySelectorAll('.tool-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected panel
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');

            // Initialize timestamp if switching to that tab
            if (tabName === 'timestamp') {
                updateCurrentTime();
            }
        }

        // Base64 Functions
        function encodeBase64() {
            const input = document.getElementById('base64Input').value;
            const result = document.getElementById('base64Result');
            
            if (!input) {
                result.textContent = 'è¯·è¾“å…¥è¦ç¼–ç çš„æ–‡æœ¬';
                result.className = 'result-area error';
                return;
            }
            
            try {
                const encoded = btoa(unescape(encodeURIComponent(input)));
                result.textContent = encoded;
                result.className = 'result-area success';
            } catch (e) {
                result.textContent = 'ç¼–ç å¤±è´¥: ' + e.message;
                result.className = 'result-area error';
            }
        }

        function decodeBase64() {
            const input = document.getElementById('base64Input').value;
            const result = document.getElementById('base64Result');
            
            if (!input) {
                result.textContent = 'è¯·è¾“å…¥è¦è§£ç çš„ Base64 æ–‡æœ¬';
                result.className = 'result-area error';
                return;
            }
            
            try {
                const decoded = decodeURIComponent(escape(atob(input)));
                result.textContent = decoded;
                result.className = 'result-area success';
            } catch (e) {
                result.textContent = 'è§£ç å¤±è´¥: æ— æ•ˆçš„ Base64 æ ¼å¼';
                result.className = 'result-area error';
            }
        }

        // Timestamp Functions
        function updateCurrentTime() {
            const now = new Date();
            const timestampSec = Math.floor(now.getTime() / 1000);
            const timestampMs = now.getTime();
            
            document.getElementById('currentTimestampSec').textContent = timestampSec;
            document.getElementById('currentTimestampMs').textContent = timestampMs;
            document.getElementById('currentDateTime').textContent = formatDateTime(now);
        }

        function formatDateTime(date) {
            return date.getFullYear() + '-' +
                   String(date.getMonth() + 1).padStart(2, '0') + '-' +
                   String(date.getDate()).padStart(2, '0') + ' ' +
                   String(date.getHours()).padStart(2, '0') + ':' +
                   String(date.getMinutes()).padStart(2, '0') + ':' +
                   String(date.getSeconds()).padStart(2, '0');
        }

        function timestampToDate() {
            const input = document.getElementById('timestampInput').value;
            const result = document.getElementById('timestampResult');
            
            if (!input) {
                result.textContent = 'è¯·è¾“å…¥æ—¶é—´æˆ³';
                result.className = 'result-area error';
                return;
            }
            
            try {
                let timestamp = parseInt(input);
                
                // Auto-detect if it's in seconds or milliseconds
                if (timestamp < 10000000000) {
                    timestamp *= 1000; // Convert to milliseconds
                }
                
                const date = new Date(timestamp);
                
                if (isNaN(date.getTime())) {
                    throw new Error('æ— æ•ˆçš„æ—¶é—´æˆ³');
                }
                
                result.textContent = formatDateTime(date);
                result.className = 'result-area success';
            } catch (e) {
                result.textContent = 'è½¬æ¢å¤±è´¥: ' + e.message;
                result.className = 'result-area error';
            }
        }

        function dateToTimestamp() {
            const input = document.getElementById('dateInput').value;
            const result = document.getElementById('dateResult');
            
            if (!input) {
                result.textContent = 'è¯·é€‰æ‹©æ—¥æœŸæ—¶é—´';
                result.className = 'result-area error';
                return;
            }
            
            try {
                const date = new Date(input);
                const timestampSec = Math.floor(date.getTime() / 1000);
                const timestampMs = date.getTime();
                
                result.innerHTML = `ç§’: ${timestampSec}<br>æ¯«ç§’: ${timestampMs}`;
                result.className = 'result-area success';
            } catch (e) {
                result.textContent = 'è½¬æ¢å¤±è´¥: ' + e.message;
                result.className = 'result-area error';
            }
        }

        // Update current time every second
        setInterval(updateCurrentTime, 1000);
        updateCurrentTime();

        // Ratio Calculator Functions
        function gcd(a, b) {
            return b === 0 ? a : gcd(b, a % b);
        }

        function calculateRatio() {
            const originalInput = document.getElementById('ratioOriginalInput').value.trim();
            
            if (!originalInput) {
                alert('è¯·åœ¨ç¬¬ä¸€è¾“å…¥æ¡†è¾“å…¥æ¯”ä¾‹,ä¾‹å¦‚: 6048Ã—4032');
                return;
            }
            
            // Support multiple separators: Ã— : / - * x
            const separators = ['Ã—', ':', '/', '-', '*', 'x', 'X'];
            let separator = null;
            
            for (let sep of separators) {
                if (originalInput.includes(sep)) {
                    separator = sep;
                    break;
                }
            }
            
            if (!separator) {
                // Check if it's a single number (for reverse calculation)
                const singleNum = parseFloat(originalInput);
                if (!isNaN(singleNum) && singleNum > 0) {
                    // User entered single number, try to calculate with ratio from second input
                    calculateReverse(singleNum);
                    return;
                } else {
                    alert('è¯·ä½¿ç”¨ Ã— : / - * x ä½œä¸ºåˆ†éš”ç¬¦,æˆ–è¾“å…¥å•ä¸ªæ•°å­—');
                    return;
                }
            }
            
            const parts = originalInput.split(separator).map(p => parseFloat(p.trim()));
            
            if (parts.length !== 2 || parts.some(isNaN) || parts.some(p => p <= 0)) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ¯”ä¾‹(ä¾‹å¦‚: 6048Ã—4032)');
                return;
            }
            
            const [num1, num2] = parts;
            
            // Convert to integers for GCD calculation
            const multiplier = 10000;
            const int1 = Math.round(num1 * multiplier);
            const int2 = Math.round(num2 * multiplier);
            
            const divisor = gcd(int1, int2);
            let simplified1 = int1 / divisor;
            let simplified2 = int2 / divisor;
            
            // Smart ratio recognition - find closest common ratio if numbers are large
            if (simplified1 > 100 || simplified2 > 100) {
                const ratio = num1 / num2;
                const commonRatios = [
                    {name: '1:1', value: 1, r1: 1, r2: 1},
                    {name: '3:2', value: 3/2, r1: 3, r2: 2},
                    {name: '4:3', value: 4/3, r1: 4, r2: 3},
                    {name: '5:3', value: 5/3, r1: 5, r2: 3},
                    {name: '5:4', value: 5/4, r1: 5, r2: 4},
                    {name: '7:5', value: 7/5, r1: 7, r2: 5},
                    {name: '16:9', value: 16/9, r1: 16, r2: 9},
                    {name: '16:10', value: 16/10, r1: 16, r2: 10},
                    {name: '2:1', value: 2/1, r1: 2, r2: 1},
                    {name: '1.618:1', value: 1.618, r1: 1.618, r2: 1},
                    {name: '2.35:1', value: 2.35, r1: 2.35, r2: 1},
                    {name: '2.39:1', value: 2.39, r1: 2.39, r2: 1},
                    // Portrait ratios
                    {name: '2:3', value: 2/3, r1: 2, r2: 3},
                    {name: '3:4', value: 3/4, r1: 3, r2: 4},
                    {name: '4:5', value: 4/5, r1: 4, r2: 5},
                    {name: '5:7', value: 5/7, r1: 5, r2: 7},
                    {name: '9:16', value: 9/16, r1: 9, r2: 16},
                    {name: '1:2', value: 1/2, r1: 1, r2: 2},
                ];
                
                // Find closest ratio within 2.5% tolerance
                let closest = null;
                let minDiff = Infinity;
                
                for (let common of commonRatios) {
                    const diff = Math.abs(ratio - common.value);
                    const tolerance = common.value * 0.025; // 2.5% tolerance
                    
                    if (diff < tolerance && diff < minDiff) {
                        minDiff = diff;
                        closest = common;
                    }
                }
                
                if (closest) {
                    simplified1 = closest.r1;
                    simplified2 = closest.r2;
                }
            }
            
            // Update the simplified ratio inputs (ç¬¬äºŒè¾“å…¥)
            document.getElementById('ratioSimple1').value = simplified1;
            document.getElementById('ratioSimple2').value = simplified2;
            
            // Update the result input (ç¬¬ä¸‰è¾“å…¥)
            document.getElementById('ratioResultInput').value = `${num1}Ã—${num2}`;

        }

        function calculateReverse(firstNumber) {
            // Get ratio from second input
            const ratio1 = parseFloat(document.getElementById('ratioSimple1').value);
            const ratio2 = parseFloat(document.getElementById('ratioSimple2').value);
            
            if (isNaN(ratio1) || isNaN(ratio2) || ratio1 <= 0 || ratio2 <= 0) {
                alert('è¯·å…ˆåœ¨ç¬¬äºŒè¾“å…¥æ¡†è¾“å…¥æˆ–é€‰æ‹©æ¯”ä¾‹(ä¾‹å¦‚ç‚¹å‡»å¸¸ç”¨æ¯”ä¾‹ 3:2)');
                return;
            }
            
            // Calculate the second number based on the ratio
            const secondNumber = Math.round(firstNumber * ratio2 / ratio1);
            
            // Update the result input (ç¬¬ä¸‰è¾“å…¥)
            document.getElementById('ratioResultInput').value = `${firstNumber}Ã—${secondNumber}`;
        }

        function clearRatio() {
            document.getElementById('ratioOriginalInput').value = '';
            document.getElementById('ratioSimple1').value = '';
            document.getElementById('ratioSimple2').value = '';
            document.getElementById('ratioResultInput').value = '';
        }

        function setRatio(ratio) {
            // Parse the ratio string (e.g., "3:2")
            const parts = ratio.split(':').map(p => parseFloat(p.trim()));
            
            if (parts.length === 2 && !parts.some(isNaN)) {
                // Set the simplified ratio (ç¬¬äºŒè¾“å…¥)
                document.getElementById('ratioSimple1').value = parts[0];
                document.getElementById('ratioSimple2').value = parts[1];
            }
        }

        // å¤åˆ¶ç¬¬ä¸€è¾“å…¥æ¡† - æ ¼å¼: 5818:3879
        function copyOriginalRatio() {
            const input = document.getElementById('ratioOriginalInput').value.trim();
            
            if (!input) {
                showToast('ç¬¬ä¸€è¾“å…¥æ¡†ä¸ºç©º', 'error');
                return;
            }
            
            // Convert to colon format
            let copyText = input.replace(/[Ã—*/\-xX]/g, ':');
            
            navigator.clipboard.writeText(copyText).then(() => {
                showToast('å·²å¤åˆ¶: ' + copyText);
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                showToast('å¤åˆ¶å¤±è´¥', 'error');
            });
        }

        // å¤åˆ¶ç¬¬äºŒè¾“å…¥æ¡† - æ ¼å¼: 3:2
        function copySimpleRatio() {
            const ratio1 = document.getElementById('ratioSimple1').value;
            const ratio2 = document.getElementById('ratioSimple2').value;
            
            if (!ratio1 || !ratio2) {
                showToast('æœ€ç®€æ¯”ä¾‹ä¸ºç©º', 'error');
                return;
            }
            
            const copyText = `${ratio1}:${ratio2}`;
            
            navigator.clipboard.writeText(copyText).then(() => {
                showToast('å·²å¤åˆ¶: ' + copyText);
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                showToast('å¤åˆ¶å¤±è´¥', 'error');
            });
        }

        // å¤åˆ¶ç¬¬ä¸‰è¾“å…¥æ¡† - æ ¼å¼: 5818Ã—3879
        function copyRatioResult() {
            const value = document.getElementById('ratioResultInput').value;
            
            if (!value || value === 'ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...') {
                showToast('è®¡ç®—ç»“æœä¸ºç©º', 'error');
                return;
            }
            
            navigator.clipboard.writeText(value).then(() => {
                showToast('å·²å¤åˆ¶: ' + value);
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                showToast('å¤åˆ¶å¤±è´¥', 'error');
            });
        }

        // Color Converter Functions
        function rgbToHex() {
            const r = parseInt(document.getElementById('colorR').value) || 0;
            const g = parseInt(document.getElementById('colorG').value) || 0;
            const b = parseInt(document.getElementById('colorB').value) || 0;
            
            // Validate RGB values
            if (r < 0 || r > 255 || g < 0 || g > 255 || b < 0 || b > 255) {
                alert('RGB å€¼å¿…é¡»åœ¨ 0-255 ä¹‹é—´');
                return;
            }
            
            // Convert to HEX
            const hex = ((r << 16) | (g << 8) | b).toString(16).padStart(6, '0');
            
            // Update outputs
            document.getElementById('hexInput').value = hex;
            document.getElementById('hexOutput').value = '#' + hex;
            document.getElementById('rgbOutput').value = `rgb(${r}, ${g}, ${b})`;
            
            // Update preview
            updateColorPreview(r, g, b);
        }

        function hexToRgb() {
            let hex = document.getElementById('hexInput').value.trim();
            
            // Remove # if present
            hex = hex.replace('#', '');
            
            // Validate HEX
            if (!/^[0-9A-Fa-f]{6}$/.test(hex)) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„ 6 ä½ 16 è¿›åˆ¶é¢œè‰²ä»£ç ');
                return;
            }
            
            // Convert to RGB
            const r = parseInt(hex.substring(0, 2), 16);
            const g = parseInt(hex.substring(2, 4), 16);
            const b = parseInt(hex.substring(4, 6), 16);
            
            // Update inputs
            document.getElementById('colorR').value = r;
            document.getElementById('colorG').value = g;
            document.getElementById('colorB').value = b;
            
            // Update outputs
            document.getElementById('rgbOutput').value = `rgb(${r}, ${g}, ${b})`;
            document.getElementById('hexOutput').value = '#' + hex.toLowerCase();
            
            // Update preview
            updateColorPreview(r, g, b);
        }

        function updateColorPreview(r, g, b) {
            const preview = document.getElementById('colorPreview');
            preview.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
        }

        function setColor(hexColor) {
            // Remove # and set to input
            const hex = hexColor.replace('#', '');
            document.getElementById('hexInput').value = hex;
            
            // Convert and update
            hexToRgb();
        }

        function copyColorValue() {
            const hexValue = document.getElementById('hexOutput').value;
            const rgbValue = document.getElementById('rgbOutput').value;
            const textToCopy = `HEX: ${hexValue}\nRGB: ${rgbValue}`;
            
            navigator.clipboard.writeText(textToCopy).then(() => {
                showToast('é¢œè‰²å€¼å·²å¤åˆ¶!');
            }).catch(err => {
                showToast('å¤åˆ¶å¤±è´¥', 'error');
            });
        }

        // é¢œè‰²é€‰æ‹©å™¨å˜åŒ–å¤„ç†
        function onColorPickerChange() {
            const picker = document.getElementById('colorPicker');
            const hexColor = picker.value; // æ ¼å¼: #667eea
            
            // è®¾ç½®åˆ° HEX è¾“å…¥æ¡†
            document.getElementById('hexInput').value = hexColor.substring(1); // ç§»é™¤ #
            
            // è§¦å‘ HEX è½¬ RGB
            hexToRgb();
        }

        // MD5 / SHA Hash Functions
        async function calculateHashFromText(text, algorithm) {
            const msgUint8 = new TextEncoder().encode(text);
            const hashBuffer = await crypto.subtle.digest(algorithm, msgUint8);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        async function calculateHashFromFile(file, algorithm) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = async function(e) {
                    try {
                        const arrayBuffer = e.target.result;
                        const hashBuffer = await crypto.subtle.digest(algorithm, arrayBuffer);
                        const hashArray = Array.from(new Uint8Array(hashBuffer));
                        const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
                        resolve(hashHex);
                    } catch(err) {
                        reject(err);
                    }
                };
                reader.onerror = reject;
                reader.readAsArrayBuffer(file);
            });
        }

        // MD5 implementation (since Web Crypto doesn't support MD5)
        function md5(string) {
            function RotateLeft(lValue, iShiftBits) {
                return (lValue<<iShiftBits) | (lValue>>>(32-iShiftBits));
            }

            function AddUnsigned(lX,lY) {
                var lX4,lY4,lX8,lY8,lResult;
                lX8 = (lX & 0x80000000);
                lY8 = (lY & 0x80000000);
                lX4 = (lX & 0x40000000);
                lY4 = (lY & 0x40000000);
                lResult = (lX & 0x3FFFFFFF)+(lY & 0x3FFFFFFF);
                if (lX4 & lY4) {
                    return (lResult ^ 0x80000000 ^ lX8 ^ lY8);
                }
                if (lX4 | lY4) {
                    if (lResult & 0x40000000) {
                        return (lResult ^ 0xC0000000 ^ lX8 ^ lY8);
                    } else {
                        return (lResult ^ 0x40000000 ^ lX8 ^ lY8);
                    }
                } else {
                    return (lResult ^ lX8 ^ lY8);
                }
            }

            function F(x,y,z) { return (x & y) | ((~x) & z); }
            function G(x,y,z) { return (x & z) | (y & (~z)); }
            function H(x,y,z) { return (x ^ y ^ z); }
            function I(x,y,z) { return (y ^ (x | (~z))); }

            function FF(a,b,c,d,x,s,ac) {
                a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));
                return AddUnsigned(RotateLeft(a, s), b);
            }

            function GG(a,b,c,d,x,s,ac) {
                a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));
                return AddUnsigned(RotateLeft(a, s), b);
            }

            function HH(a,b,c,d,x,s,ac) {
                a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));
                return AddUnsigned(RotateLeft(a, s), b);
            }

            function II(a,b,c,d,x,s,ac) {
                a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));
                return AddUnsigned(RotateLeft(a, s), b);
            }

            function ConvertToWordArray(string) {
                var lWordCount;
                var lMessageLength = string.length;
                var lNumberOfWords_temp1=lMessageLength + 8;
                var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1 % 64))/64;
                var lNumberOfWords = (lNumberOfWords_temp2+1)*16;
                var lWordArray=Array(lNumberOfWords-1);
                var lBytePosition = 0;
                var lByteCount = 0;
                while ( lByteCount < lMessageLength ) {
                    lWordCount = (lByteCount-(lByteCount % 4))/4;
                    lBytePosition = (lByteCount % 4)*8;
                    lWordArray[lWordCount] = (lWordArray[lWordCount] | (string.charCodeAt(lByteCount)<<lBytePosition));
                    lByteCount++;
                }
                lWordCount = (lByteCount-(lByteCount % 4))/4;
                lBytePosition = (lByteCount % 4)*8;
                lWordArray[lWordCount] = lWordArray[lWordCount] | (0x80<<lBytePosition);
                lWordArray[lNumberOfWords-2] = lMessageLength<<3;
                lWordArray[lNumberOfWords-1] = lMessageLength>>>29;
                return lWordArray;
            }

            function WordToHex(lValue) {
                var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;
                for (lCount = 0;lCount<=3;lCount++) {
                    lByte = (lValue>>>(lCount*8)) & 255;
                    WordToHexValue_temp = "0" + lByte.toString(16);
                    WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2);
                }
                return WordToHexValue;
            }

            function Utf8Encode(string) {
                string = string.replace(/\r\n/g,"\n");
                var utftext = "";
                for (var n = 0; n < string.length; n++) {
                    var c = string.charCodeAt(n);
                    if (c < 128) {
                        utftext += String.fromCharCode(c);
                    }
                    else if((c > 127) && (c < 2048)) {
                        utftext += String.fromCharCode((c >> 6) | 192);
                        utftext += String.fromCharCode((c & 63) | 128);
                    }
                    else {
                        utftext += String.fromCharCode((c >> 12) | 224);
                        utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                        utftext += String.fromCharCode((c & 63) | 128);
                    }
                }
                return utftext;
            }

            var x=Array();
            var k,AA,BB,CC,DD,a,b,c,d;
            var S11=7, S12=12, S13=17, S14=22;
            var S21=5, S22=9 , S23=14, S24=20;
            var S31=4, S32=11, S33=16, S34=23;
            var S41=6, S42=10, S43=15, S44=21;

            string = Utf8Encode(string);
            x = ConvertToWordArray(string);
            a = 0x67452301; b = 0xEFCDAB89; c = 0x98BADCFE; d = 0x10325476;

            for (k=0;k<x.length;k+=16) {
                AA=a; BB=b; CC=c; DD=d;
                a=FF(a,b,c,d,x[k+0], S11,0xD76AA478);
                d=FF(d,a,b,c,x[k+1], S12,0xE8C7B756);
                c=FF(c,d,a,b,x[k+2], S13,0x242070DB);
                b=FF(b,c,d,a,x[k+3], S14,0xC1BDCEEE);
                a=FF(a,b,c,d,x[k+4], S11,0xF57C0FAF);
                d=FF(d,a,b,c,x[k+5], S12,0x4787C62A);
                c=FF(c,d,a,b,x[k+6], S13,0xA8304613);
                b=FF(b,c,d,a,x[k+7], S14,0xFD469501);
                a=FF(a,b,c,d,x[k+8], S11,0x698098D8);
                d=FF(d,a,b,c,x[k+9], S12,0x8B44F7AF);
                c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);
                b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);
                a=FF(a,b,c,d,x[k+12],S11,0x6B901122);
                d=FF(d,a,b,c,x[k+13],S12,0xFD987193);
                c=FF(c,d,a,b,x[k+14],S13,0xA679438E);
                b=FF(b,c,d,a,x[k+15],S14,0x49B40821);
                a=GG(a,b,c,d,x[k+1], S21,0xF61E2562);
                d=GG(d,a,b,c,x[k+6], S22,0xC040B340);
                c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);
                b=GG(b,c,d,a,x[k+0], S24,0xE9B6C7AA);
                a=GG(a,b,c,d,x[k+5], S21,0xD62F105D);
                d=GG(d,a,b,c,x[k+10],S22,0x2441453);
                c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);
                b=GG(b,c,d,a,x[k+4], S24,0xE7D3FBC8);
                a=GG(a,b,c,d,x[k+9], S21,0x21E1CDE6);
                d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);
                c=GG(c,d,a,b,x[k+3], S23,0xF4D50D87);
                b=GG(b,c,d,a,x[k+8], S24,0x455A14ED);
                a=GG(a,b,c,d,x[k+13],S21,0xA9E3E905);
                d=GG(d,a,b,c,x[k+2], S22,0xFCEFA3F8);
                c=GG(c,d,a,b,x[k+7], S23,0x676F02D9);
                b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);
                a=HH(a,b,c,d,x[k+5], S31,0xFFFA3942);
                d=HH(d,a,b,c,x[k+8], S32,0x8771F681);
                c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);
                b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);
                a=HH(a,b,c,d,x[k+1], S31,0xA4BEEA44);
                d=HH(d,a,b,c,x[k+4], S32,0x4BDECFA9);
                c=HH(c,d,a,b,x[k+7], S33,0xF6BB4B60);
                b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);
                a=HH(a,b,c,d,x[k+13],S31,0x289B7EC6);
                d=HH(d,a,b,c,x[k+0], S32,0xEAA127FA);
                c=HH(c,d,a,b,x[k+3], S33,0xD4EF3085);
                b=HH(b,c,d,a,x[k+6], S34,0x4881D05);
                a=HH(a,b,c,d,x[k+9], S31,0xD9D4D039);
                d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);
                c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);
                b=HH(b,c,d,a,x[k+2], S34,0xC4AC5665);
                a=II(a,b,c,d,x[k+0], S41,0xF4292244);
                d=II(d,a,b,c,x[k+7], S42,0x432AFF97);
                c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);
                b=II(b,c,d,a,x[k+5], S44,0xFC93A039);
                a=II(a,b,c,d,x[k+12],S41,0x655B59C3);
                d=II(d,a,b,c,x[k+3], S42,0x8F0CCC92);
                c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);
                b=II(b,c,d,a,x[k+1], S44,0x85845DD1);
                a=II(a,b,c,d,x[k+8], S41,0x6FA87E4F);
                d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);
                c=II(c,d,a,b,x[k+6], S43,0xA3014314);
                b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);
                a=II(a,b,c,d,x[k+4], S41,0xF7537E82);
                d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);
                c=II(c,d,a,b,x[k+2], S43,0x2AD7D2BB);
                b=II(b,c,d,a,x[k+9], S44,0xEB86D391);
                a=AddUnsigned(a,AA);
                b=AddUnsigned(b,BB);
                c=AddUnsigned(c,CC);
                d=AddUnsigned(d,DD);
            }

            var temp = WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);
            return temp.toLowerCase();
        }

        let selectedFile = null;

        function handleFileSelect(event) {
            selectedFile = event.target.files[0];
            if (selectedFile) {
                // Clear text input when file is selected
                document.getElementById('md5Input').value = '';
            }
        }

        async function calculateHashes() {
            const textInput = document.getElementById('md5Input').value;
            
            if (!textInput && !selectedFile) {
                alert('è¯·è¾“å…¥æ–‡æœ¬æˆ–é€‰æ‹©æ–‡ä»¶');
                return;
            }

            try {
                let md5Hash, sha1Hash, sha256Hash;

                if (selectedFile) {
                    // Calculate hashes for file
                    md5Hash = 'N/A (æ–‡ä»¶MD5éœ€è¦æœåŠ¡å™¨ç«¯è®¡ç®—)';
                    sha1Hash = await calculateHashFromFile(selectedFile, 'SHA-1');
                    sha256Hash = await calculateHashFromFile(selectedFile, 'SHA-256');
                } else {
                    // Calculate hashes for text
                    md5Hash = md5(textInput);
                    sha1Hash = await calculateHashFromText(textInput, 'SHA-1');
                    sha256Hash = await calculateHashFromText(textInput, 'SHA-256');
                }

                // Display results
                document.getElementById('md5Result').value = md5Hash;
                document.getElementById('sha1Result').value = sha1Hash;
                document.getElementById('sha256Result').value = sha256Hash;
                document.getElementById('hashResults').style.display = 'block';
            } catch (error) {
                console.error('Hash calculation error:', error);
                alert('è®¡ç®—å“ˆå¸Œå€¼å¤±è´¥: ' + error.message);
            }
        }

        function copyHash(elementId) {
            const value = document.getElementById(elementId).value;
            if (!value || value === 'N/A (æ–‡ä»¶MD5éœ€è¦æœåŠ¡å™¨ç«¯è®¡ç®—)') {
                showToast('æ²¡æœ‰å¯å¤åˆ¶çš„å“ˆå¸Œå€¼', 'error');
                return;
            }
            
            navigator.clipboard.writeText(value).then(() => {
                showToast('å·²å¤åˆ¶å“ˆå¸Œå€¼!');
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                showToast('å¤åˆ¶å¤±è´¥', 'error');
            });
        }

        function clearMD5() {
            document.getElementById('md5Input').value = '';
            document.getElementById('md5FileInput').value = '';
            document.getElementById('hashResults').style.display = 'none';
            selectedFile = null;
        }

        // Add event listeners for real-time color updates
        document.addEventListener('DOMContentLoaded', function() {
            // RGB inputs
            ['colorR', 'colorG', 'colorB'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', function() {
                        const r = parseInt(document.getElementById('colorR').value) || 0;
                        const g = parseInt(document.getElementById('colorG').value) || 0;
                        const b = parseInt(document.getElementById('colorB').value) || 0;
                        
                        // Clamp values
                        if (this.value > 255) this.value = 255;
                        if (this.value < 0) this.value = 0;
                        
                        // Update preview and outputs in real-time
                        updateColorPreview(r, g, b);
                        document.getElementById('rgbOutput').value = `rgb(${r}, ${g}, ${b})`;
                        
                        const hex = ((r << 16) | (g << 8) | b).toString(16).padStart(6, '0');
                        document.getElementById('hexInput').value = hex;
                        document.getElementById('hexOutput').value = '#' + hex;
                    });
                }
            });
            
            // HEX input
            const hexInput = document.getElementById('hexInput');
            if (hexInput) {
                hexInput.addEventListener('input', function() {
                    let hex = this.value.replace('#', '');
                    
                    // Only update if valid hex
                    if (/^[0-9A-Fa-f]{6}$/.test(hex)) {
                        const r = parseInt(hex.substring(0, 2), 16);
                        const g = parseInt(hex.substring(2, 4), 16);
                        const b = parseInt(hex.substring(4, 6), 16);
                        
                        document.getElementById('colorR').value = r;
                        document.getElementById('colorG').value = g;
                        document.getElementById('colorB').value = b;
                        
                        updateColorPreview(r, g, b);
                        document.getElementById('rgbOutput').value = `rgb(${r}, ${g}, ${b})`;
                        document.getElementById('hexOutput').value = '#' + hex.toLowerCase();
                    }
                });
            }
        });

        // JSON Tree View Functions
        let jsonData = null;
        let selectedNode = null;

        function parseJSON() {
            const input = document.getElementById('jsonInput').value.trim();
            const treeContainer = document.getElementById('jsonTree');
            
            if (!input) {
                treeContainer.innerHTML = '<div class="json-placeholder">è¯·è¾“å…¥ JSON æ•°æ®...</div>';
                return;
            }
            
            try {
                jsonData = JSON.parse(input);
                renderJSONTree(jsonData);
            } catch (e) {
                treeContainer.innerHTML = `<div class="json-placeholder" style="color: #ff6b6b;">JSON è§£æé”™è¯¯: ${e.message}</div>`;
            }
        }

        function renderJSONTree(data) {
            const treeContainer = document.getElementById('jsonTree');
            treeContainer.innerHTML = '';
            
            const rootNode = createTreeNode('JSON', data, 'JSON', true);
            treeContainer.appendChild(rootNode);
        }

        function createTreeNode(key, value, path, isRoot = false) {
            const nodeDiv = document.createElement('div');
            nodeDiv.className = isRoot ? 'json-node json-node-root' : 'json-node';
            
            const lineDiv = document.createElement('div');
            lineDiv.className = 'json-node-line';
            lineDiv.dataset.path = path;
            lineDiv.dataset.key = key;
            
            const toggle = document.createElement('span');
            const isExpandable = typeof value === 'object' && value !== null;
            toggle.className = isExpandable ? 'json-toggle expanded' : 'json-toggle leaf';
            
            const keySpan = document.createElement('span');
            keySpan.className = 'json-node-key';
            keySpan.textContent = key;
            
            lineDiv.appendChild(toggle);
            lineDiv.appendChild(keySpan);
            
            if (isExpandable) {
                const typeSpan = document.createElement('span');
                typeSpan.className = 'json-node-type';
                if (Array.isArray(value)) {
                    typeSpan.textContent = `Array[${value.length}]`;
                } else {
                    const keys = Object.keys(value);
                    typeSpan.textContent = `Object{${keys.length}}`;
                }
                lineDiv.appendChild(typeSpan);
                
                const childrenDiv = document.createElement('div');
                childrenDiv.className = 'json-node-children expanded';
                
                if (Array.isArray(value)) {
                    value.forEach((item, index) => {
                        const childPath = `${path}[${index}]`;
                        const childNode = createTreeNode(index.toString(), item, childPath);
                        childrenDiv.appendChild(childNode);
                    });
                } else {
                    Object.keys(value).forEach(childKey => {
                        const childPath = path === 'JSON' ? childKey : `${path}.${childKey}`;
                        const childNode = createTreeNode(childKey, value[childKey], childPath);
                        childrenDiv.appendChild(childNode);
                    });
                }
                
                toggle.onclick = (e) => {
                    e.stopPropagation();
                    toggleNode(toggle, childrenDiv);
                };
                
                nodeDiv.appendChild(lineDiv);
                nodeDiv.appendChild(childrenDiv);
            } else {
                const valueSpan = document.createElement('span');
                valueSpan.className = 'json-node-value';
                
                if (typeof value === 'string') {
                    valueSpan.classList.add('string');
                    valueSpan.textContent = `"${value}"`;
                } else if (typeof value === 'number') {
                    valueSpan.classList.add('number');
                    valueSpan.textContent = value;
                } else if (typeof value === 'boolean') {
                    valueSpan.classList.add('boolean');
                    valueSpan.textContent = value;
                } else if (value === null) {
                    valueSpan.classList.add('null');
                    valueSpan.textContent = 'null';
                }
                
                lineDiv.appendChild(valueSpan);
                nodeDiv.appendChild(lineDiv);
            }
            
            lineDiv.onclick = (e) => {
                e.stopPropagation();
                selectNode(lineDiv, path, key);
            };
            
            return nodeDiv;
        }

        function toggleNode(toggle, childrenDiv) {
            if (toggle.classList.contains('expanded')) {
                toggle.classList.remove('expanded');
                toggle.classList.add('collapsed');
                childrenDiv.classList.remove('expanded');
            } else {
                toggle.classList.remove('collapsed');
                toggle.classList.add('expanded');
                childrenDiv.classList.add('expanded');
            }
        }

        function selectNode(lineDiv, path, key) {
            // Remove previous selection
            if (selectedNode) {
                selectedNode.classList.remove('selected');
            }
            
            // Add new selection
            lineDiv.classList.add('selected');
            selectedNode = lineDiv;
            
            // Update path and key displays
            document.getElementById('jsonPath').value = path;
            document.getElementById('jsonKey').value = key;
        }

        function expandAll() {
            const toggles = document.querySelectorAll('.json-toggle.collapsed');
            toggles.forEach(toggle => {
                const parent = toggle.closest('.json-node');
                const children = parent.querySelector('.json-node-children');
                if (children) {
                    toggle.classList.remove('collapsed');
                    toggle.classList.add('expanded');
                    children.classList.add('expanded');
                }
            });
        }

        function collapseAll() {
            const toggles = document.querySelectorAll('.json-toggle.expanded');
            toggles.forEach(toggle => {
                const parent = toggle.closest('.json-node');
                const children = parent.querySelector('.json-node-children');
                if (children && !parent.classList.contains('json-node-root')) {
                    toggle.classList.remove('expanded');
                    toggle.classList.add('collapsed');
                    children.classList.remove('expanded');
                }
            });
        }

        function copyJsonPath() {
            const path = document.getElementById('jsonPath').value;
            if (path && path !== 'JSON.root') {
                navigator.clipboard.writeText(path).then(() => {
                    const btn = event.target;
                    const originalText = btn.textContent;
                    btn.textContent = 'âœ“ Copied';
                    setTimeout(() => {
                        btn.textContent = originalText;
                    }, 2000);
                });
            }
        }

        function formatJSONText() {
            const input = document.getElementById('jsonInput').value;
            
            if (!input) {
                alert('è¯·è¾“å…¥ JSON æ•°æ®');
                return;
            }
            
            try {
                const parsed = JSON.parse(input);
                const formatted = JSON.stringify(parsed, null, 2);
                document.getElementById('jsonInput').value = formatted;
                parseJSON(); // Re-render tree
            } catch (e) {
                alert('JSON æ ¼å¼é”™è¯¯: ' + e.message);
            }
        }

        function compressJSON() {
            const input = document.getElementById('jsonInput').value;
            
            if (!input) {
                alert('è¯·è¾“å…¥ JSON æ•°æ®');
                return;
            }
            
            try {
                const parsed = JSON.parse(input);
                const compressed = JSON.stringify(parsed);
                document.getElementById('jsonInput').value = compressed;
                parseJSON(); // Re-render tree
            } catch (e) {
                alert('JSON æ ¼å¼é”™è¯¯: ' + e.message);
            }
        }

        // YAML Conversion Functions
        function yamlToProperties() {
            const input = document.getElementById('yamlInput').value;
            const output = document.getElementById('yamlOutput');
            
            if (!input) {
                output.value = 'è¯·è¾“å…¥ YAML å†…å®¹';
                return;
            }
            
            try {
                const yamlObj = jsyaml.load(input);
                const properties = objectToProperties(yamlObj);
                output.value = properties;
            } catch (e) {
                output.value = 'YAML è§£æé”™è¯¯: ' + e.message;
            }
        }

        function propertiesToYaml() {
            const input = document.getElementById('yamlInput').value;
            const output = document.getElementById('yamlOutput');
            
            if (!input) {
                output.value = 'è¯·è¾“å…¥ Properties å†…å®¹';
                return;
            }
            
            try {
                const obj = propertiesToObject(input);
                const yaml = jsyaml.dump(obj, { indent: 2 });
                output.value = yaml;
            } catch (e) {
                output.value = 'Properties è§£æé”™è¯¯: ' + e.message;
            }
        }

        function objectToProperties(obj, prefix = '') {
            let result = [];
            
            for (let key in obj) {
                const fullKey = prefix ? `${prefix}.${key}` : key;
                const value = obj[key];
                
                if (value !== null && typeof value === 'object' && !Array.isArray(value)) {
                    result.push(...objectToProperties(value, fullKey));
                } else if (Array.isArray(value)) {
                    value.forEach((item, index) => {
                        if (typeof item === 'object') {
                            result.push(...objectToProperties(item, `${fullKey}[${index}]`));
                        } else {
                            result.push(`${fullKey}[${index}]=${item}`);
                        }
                    });
                } else {
                    result.push(`${fullKey}=${value}`);
                }
            }
            
            return result.join('\n');
        }

        function propertiesToObject(properties) {
            const obj = {};
            const lines = properties.split('\n');
            
            for (let line of lines) {
                line = line.trim();
                
                // Skip empty lines and comments
                if (!line || line.startsWith('#') || line.startsWith('!')) {
                    continue;
                }
                
                const index = line.indexOf('=');
                if (index === -1) continue;
                
                const key = line.substring(0, index).trim();
                const value = line.substring(index + 1).trim();
                
                setNestedProperty(obj, key, value);
            }
            
            return obj;
        }

        function setNestedProperty(obj, path, value) {
            const keys = path.split('.');
            let current = obj;
            
            for (let i = 0; i < keys.length - 1; i++) {
                const key = keys[i];
                
                // Handle array notation
                const arrayMatch = key.match(/^(.+)\[(\d+)\]$/);
                if (arrayMatch) {
                    const arrayKey = arrayMatch[1];
                    const arrayIndex = parseInt(arrayMatch[2]);
                    
                    if (!current[arrayKey]) {
                        current[arrayKey] = [];
                    }
                    
                    if (!current[arrayKey][arrayIndex]) {
                        current[arrayKey][arrayIndex] = {};
                    }
                    
                    current = current[arrayKey][arrayIndex];
                } else {
                    if (!current[key]) {
                        current[key] = {};
                    }
                    current = current[key];
                }
            }
            
            const lastKey = keys[keys.length - 1];
            const arrayMatch = lastKey.match(/^(.+)\[(\d+)\]$/);
            
            if (arrayMatch) {
                const arrayKey = arrayMatch[1];
                const arrayIndex = parseInt(arrayMatch[2]);
                
                if (!current[arrayKey]) {
                    current[arrayKey] = [];
                }
                
                current[arrayKey][arrayIndex] = parseValue(value);
            } else {
                current[lastKey] = parseValue(value);
            }
        }

        function parseValue(value) {
            // Try to parse as number
            if (!isNaN(value) && value !== '') {
                return parseFloat(value);
            }
            
            // Parse boolean
            if (value === 'true') return true;
            if (value === 'false') return false;
            
            // Return as string
            return value;
        }

        // Copy to Clipboard
        function copyResult(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent || element.value;
            
            if (!text || text === 'ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...') {
                showToast('æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹', 'error');
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿!');
            }).catch(err => {
                showToast('å¤åˆ¶å¤±è´¥', 'error');
            });
        }

        // Set default datetime to now
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            
            document.getElementById('dateInput').value = `${year}-${month}-${day}T${hours}:${minutes}`;
        });
    </script>
</body>
</html>
